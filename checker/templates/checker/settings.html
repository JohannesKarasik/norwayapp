{% load static %}

<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Innstillinger – Rettskriving Sjekk</title>
  <meta name="description" content="Administrer konto, abonnement og passord for Rettskriving Sjekk." />

  <link rel="icon" href="{% static 'checker/favicon_io/favicon.ico' %}">
  <link rel="icon" type="image/png" sizes="32x32" href="{% static 'checker/favicon_io/favicon-32x32.png' %}">
  <link rel="icon" type="image/png" sizes="16x16" href="{% static 'checker/favicon_io/favicon-16x16.png' %}">
  <link rel="apple-touch-icon" href="{% static 'checker/favicon_io/apple-touch-icon.png' %}">
  <link rel="shortcut icon" href="{% static 'checker/favicon_io/favicon.ico' %}">
  <link rel="manifest" href="{% static 'checker/favicon_io/site.webmanifest' %}">

  <link rel="stylesheet" href="{% static 'checker/main.css' %}">
</head>

<body>

  {% include "checker/header.html" %}

  <div class="wrap">
    <main class="card">

      <div class="card__body">
        <div class="settings">
          <h1>Innstillinger</h1>

          {% if messages %}
            {% for message in messages %}
              <div class="auth-error {{ message.tags }}">
                {{ message }}
              </div>
            {% endfor %}
          {% endif %}

          <section class="settings-block">
            <h3>Konto</h3>
            <p><strong>E-post:</strong> {{ email }}</p>

            {% if is_paying %}
              <p class="status status--ok">Abonnement aktivt</p>
            {% else %}
              <p class="status status--warn">Ingen aktivt abonnement</p>
            {% endif %}
          </section>

          <section class="settings-block">
            <h3>Endre passord</h3>

            <form method="post">
              {% csrf_token %}

              <input
                type="password"
                name="current_password"
                placeholder="Nåværende passord"
                required
              >

              <input
                type="password"
                name="new_password"
                placeholder="Nytt passord"
                required
              >

              <button type="submit" class="btn btn--primary">
                Oppdater passord
              </button>
            </form>
          </section>

          <section class="settings-block">
            <form method="post" action="{% url 'logout' %}">
              {% csrf_token %}
              <button class="btn btn--secondary">
                Logg ut
              </button>
            </form>
          </section>
        </div>
      </div>

    </main>
  </div>

  {% include "checker/footer.html" %}

  <style>
    .settings {
      max-width: 520px;
      margin: 40px auto;
    }

    .settings-block {
      margin-top: 32px;
    }

    .status--ok {
      color: #0a7c2f;
    }

    .status--warn {
      color: #b45309;
    }
  </style>

</body>
</html>
